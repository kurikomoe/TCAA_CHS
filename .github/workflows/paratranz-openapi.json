{"openapi":"3.0.3","info":{"title":"ParaTranz OpenAPI 文档","description":"本文档介绍 ParaTranz.cn 平台的 API\n## 获取 Token\n首先需要获取API Token，可以在个人资料页面中的设置选项卡获取API Token， 调用 API 时将 Token 直接放在请求头的 Authorization 中即可。\n\ncURL 使用示例:\n\n    $ curl --header \"Authorization: XXXXXXXXX\" https://paratranz.cn/api/projects\n\n## 错误处理\nAPI 返回的错误格式如下\n\n    {\n      \"message\": \"ERROR MESSAGE\", // 错误消息\n      \"code\": 10000 // 5位错误代码，注意与下面的HTTP状态码区分，部分接口不返回\n    }\n\nHTTP状态码有以下几种类型\n  * 400 - 调用参数错误\n  * 401 - Token 错误或过期\n  * 403 - 没有相关权限\n  * 404 - 资源不存在\n  * 405 - 没有相关HTTP方法，一般为调用方法错误\n  * 429 - 调用过于频繁，具体频率限制请看上一节\n  * 500 - 服务器错误，一般会提供具体出错的位置，请发送给站长方便定位问题\n  * 502 - 服务器无响应，部分用户被墙时可能会遇到\n  * 503 - 服务不可用\n  * 504 - 服务超时，访问量大时会出现\n\n## SDK 及 JSON 格式的 API 文档\n本文档遵循 OpenAPI 规范，[点击此处](https://paratranz.cn/api-docs?raw=1) 获取 JSON 格式的文档，您可以使用 [OpenAPI Generator](https://github.com/OpenAPITools/openapi-generator) 生成各种语言的 SDK\n## 更新历史\n  * v0.3.6 - 2024.07.12 修复获取 Token 说明\n  * v0.3.5 - 2023.12.25 修复部分 schema 问题\n  * v0.3.4 - 2023.12.23 增加API调用频率限制说明\n  * v0.3.3 - 2023.08.11 增加项目成员相关接口说明\n  * v0.3.2 - 2022.11.04 增加文件翻译相关接口说明\n  * v0.3.1 - 2022.10.16 修改 tag 及 schema 以便生成 sdk\n  * v0.3.0 - 2022.10.16 增加术语历史记录接口说明，调整历史记录接口字段; 增加文档中 operationId 定义;\n                        修复项目信息相关接口格式定义; 增加 JSON 格式文档入口\n  * v0.2.1 - 2022.07.23 增加成员贡献接口文档; 完善列表接口数据结构\n  * v0.2.0 - 2022.06.15 增加讨论及私信相关接口文档\n  * v0.1.3 - 2022.03.10 增加历史记录相关接口文档\n  * v0.1.2 - 2022.02.07 完善词条搜索接口 query 参数说明\n  * v0.1.1 - 2022.01.17 增加文件历史相关接口文档\n  * v0.1.0 - 2022.01.12 初次发布\n","version":"0.3.6","contact":{"email":"master@mail.paratranz.com"}},"servers":[{"url":"https://paratranz.cn/api"}],"tags":[{"name":"Projects","description":"项目相关接口"},{"name":"Strings","description":"词条相关接口"},{"name":"Files","description":"文件相关接口"},{"name":"History","description":"历史记录相关接口"},{"name":"Terms","description":"术语相关接口"},{"name":"Members","description":"成员相关接口"},{"name":"Artifacts","description":"导出压缩包及下载相关接口"},{"name":"Users","description":"用户相关接口"},{"name":"Issues","description":"讨论相关接口"},{"name":"Mails","description":"私信相关接口"},{"name":"Scores","description":"成员贡献相关接口"}],"security":[{"Token":[]}],"paths":{"/history":{"parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/pageSize"},{"in":"query","name":"project","description":"项目ID","schema":{"type":"integer"}},{"in":"query","name":"uid","description":"用户ID","schema":{"type":"integer"}},{"in":"query","name":"tid","schema":{"type":"integer"},"description":"词条ID，当 type 为 text 时指定，用于获取某一词条的全部历史记录，**指定后分页失效**\n"},{"in":"query","name":"type","description":"历史记录类型\n- `text` 词条历史\n\n- `import` 导入历史，同 project 一起使用\n\n- `comment` 评论记录，同 project 或 uid 一起使用\n","schema":{"enum":["text","import","comment"]}}],"get":{"operationId":"getHistory","description":"获取项目或用户的历史记录，project、uid 与 tid 必须有一个存在，否则会返回 400","tags":["History"],"summary":"获取历史记录","responses":{"200":{"$ref":"#/components/responses/HistoryList"}}}},"/projects":{"get":{"operationId":"getProjects","tags":["Projects"],"summary":"项目列表","description":"获取项目列表","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/pageSize"}],"responses":{"200":{"$ref":"#/components/responses/ProjectList"}}},"post":{"operationId":"createProject","tags":["Projects"],"summary":"创建项目","description":"创建项目","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"responses":{"201":{"description":"创建成功","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"400":{"description":"数据有误"},"403":{"description":"没有权限创建项目"}}}},"/projects/{projectId}":{"parameters":[{"$ref":"#/components/parameters/projectId"}],"get":{"operationId":"getProject","tags":["Projects"],"summary":"项目信息","description":"通过ID获取项目信息","responses":{"200":{"$ref":"#/components/responses/ProjectItem"}}},"put":{"operationId":"saveProject","tags":["Projects"],"summary":"更新项目","description":"通过ID更新项目信息","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"responses":{"200":{"$ref":"#/components/responses/ProjectItem"}}},"delete":{"operationId":"deleteProject","tags":["Projects"],"summary":"删除项目","description":"通过ID删除项目","responses":{"200":{"description":"删除成功"}}}},"/projects/{projectId}/files":{"parameters":[{"$ref":"#/components/parameters/projectId"}],"get":{"operationId":"getFiles","summary":"文件列表","description":"获取项目文件列表","tags":["Files"],"responses":{"200":{"$ref":"#/components/responses/FileList"}}},"post":{"operationId":"createFile","summary":"上传文件","description":"上传并创建文件，文件名不能与 path 指定的目录中的文件冲突","tags":["Files"],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","description":"文件数据，文件名由此项的文件名决定","format":"binary"},"path":{"type":"string","description":"文件路径","example":"path/to/"}}}}}},"responses":{"200":{"description":"文件上传成功","content":{"application/json":{"schema":{"type":"object","properties":{"file":{"$ref":"#/components/schemas/File"},"revision":{"$ref":"#/components/schemas/Revision"}}}}}}}}},"/projects/{projectId}/files/{fileId}":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/fileId"}],"get":{"operationId":"getFile","summary":"文件信息","description":"通过ID获取文件信息","tags":["Files"],"responses":{"200":{"$ref":"#/components/responses/FileItem"}}},"post":{"operationId":"updateFile","tags":["Files"],"summary":"更新文件","description":"通过ID上传并更新文件","requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","description":"文件数据，格式需与创建时的文件保持一致，也可上传标准JSON格式（文件名需为原文件名加.json）","format":"binary"}}}}}},"responses":{"200":{"$ref":"#/components/responses/FileItem"}}},"put":{"operationId":"saveFile","tags":["Files"],"summary":"修改文件","description":"通过ID修改文件信息","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","description":"文件名，需填写完整路径"},"extra":{"type":"object","description":"JSON 格式，可随意填写需要的保存的其他信息"}}}}}},"responses":{"200":{"$ref":"#/components/responses/FileItem"}}},"delete":{"operationId":"deleteFile","tags":["Files"],"summary":"删除文件","description":"通过ID删除文件","responses":{"200":{"description":"文件已删除"}}}},"/projects/{projectId}/files/{fileId}/translation":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/fileId"}],"get":{"operationId":"getFileTranslation","summary":"文件翻译","description":"通过ID获取文件翻译数据","tags":["Files"],"responses":{"200":{"description":"返回JSON原始数据文件"}}},"post":{"operationId":"updateFileTranslation","tags":["Files"],"summary":"更新文件翻译","description":"通过ID上传并更新文件中的词条翻译","requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","description":"文件数据，格式需与创建时的文件保持一致，也可上传标准JSON格式（文件名需为原文件名加.json）","format":"binary"},"force":{"type":"boolean","description":"是否强制覆盖翻译，默认为 `false`，此时翻译仅会覆盖未人工编辑过的词条"}}}}}},"responses":{"200":{"$ref":"#/components/responses/FileItem"}}}},"/projects/{projectId}/files/revisions":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/pageSize"},{"name":"file","in":"query","description":"指定文件获取历史","schema":{"type":"number","minimum":1}},{"name":"type","in":"query","description":"指定类型获取历史，同revision中的type定义","schema":{"type":"string","enum":["create","update","import"]}}],"get":{"operationId":"getFileRevisions","tags":["History"],"summary":"文件历史","description":"查看项目所有文件上传、更新及删除历史","responses":{"200":{"$ref":"#/components/responses/RevisionList"}}}},"/projects/{projectId}/strings":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/pageSize"}],"get":{"operationId":"getStrings","tags":["Strings"],"summary":"词条列表","parameters":[{"in":"query","name":"file","schema":{"type":"integer"},"description":"词条所在文件ID"},{"in":"query","name":"stage","description":"词条状态","schema":{"type":"integer"}}],"description":"获取项目词条","responses":{"200":{"$ref":"#/components/responses/StringList"}}},"post":{"operationId":"createString","tags":["Strings"],"summary":"创建词条","description":"创建词条","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StringItem"}}}},"responses":{"200":{"$ref":"#/components/responses/StringItem"}}}},"/projects/{projectId}/strings/{stringId}":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/stringId"}],"get":{"operationId":"getString","tags":["Strings"],"summary":"获取词条","description":"通过ID获取词条信息","responses":{"200":{"$ref":"#/components/responses/StringItem"}}},"put":{"operationId":"saveString","tags":["Strings"],"summary":"更新词条","description":"通过ID更新词条信息","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/StringItem"}}}},"responses":{"200":{"$ref":"#/components/responses/StringItem"}}},"delete":{"operationId":"deleteString","tags":["Strings"],"summary":"删除词条","description":"通过ID删除词条，仅管理员可用","responses":{"200":{"description":"删除成功"}}}},"/projects/{projectId}/terms":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/pageSize"}],"get":{"operationId":"getTerms","summary":"术语列表","description":"获取项目术语列表","tags":["Terms"],"responses":{"200":{"$ref":"#/components/responses/TermList"}}},"post":{"operationId":"createTerm","summary":"创建术语","description":"创建新术语，如果已存在相同术语会失败","tags":["Terms"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Term"}}}},"responses":{"200":{"$ref":"#/components/responses/TermItem"}}},"put":{"operationId":"importTerms","summary":"批量导入术语","description":"上传JSON文件批量导入术语","tags":["Terms"],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","description":"JSON文件数据，示例如下\n```  [\n    {\n      \"term\": \"apple\",\n      \"translation\": \"苹果\",\n      \"pos\": \"noun\",\n      \"note\": \"注释\",\n      \"variants\": [\"apples\"]\n    }\n  ]\n```\n","format":"binary"}}}}}},"responses":{"200":{"description":"术语导入成功","content":{"application/json":{"schema":{"properties":{"inserted":{"type":"integer","description":"新创建的术语数量"},"updated":{"type":"integer","description":"已更新的术语数量"},"deleted":{"type":"integer","description":"已删除的术语数量"}}}}}}}}},"/projects/{projectId}/terms/{termId}":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/termId"}],"get":{"operationId":"getTerm","summary":"术语信息","description":"通过ID获取项目术语信息","tags":["Terms"],"responses":{"200":{"$ref":"#/components/responses/TermItem"}}},"put":{"operationId":"saveTerm","summary":"修改术语","description":"修改术语","tags":["Terms"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Term"}}}},"responses":{"200":{"$ref":"#/components/responses/TermItem"}}},"delete":{"operationId":"deleteTerm","tags":["Terms"],"summary":"删除术语","description":"通过ID删除术语，仅创建者及管理员可以删除","responses":{"200":{"description":"删除成功"}}}},"/projects/{projectId}/terms/{termId}/history":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/termId"}],"get":{"operationId":"getTermHistory","summary":"术语历史","description":"通过ID获取项目术语修改历史记录","tags":["History"],"responses":{"200":{"$ref":"#/components/responses/TermHistoryList"}}}},"/projects/{projectId}/members":{"parameters":[{"$ref":"#/components/parameters/projectId"}],"get":{"operationId":"getMembers","summary":"成员列表","description":"获取项目成员列表","tags":["Members"],"responses":{"200":{"$ref":"#/components/responses/MemberList"}}},"post":{"operationId":"createMember","summary":"创建成员","description":"加入新成员。需管理员以上权限","tags":["Members"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Member"}}}},"responses":{"200":{"$ref":"#/components/responses/MemberItem"}}}},"/projects/{projectId}/members/{memberId}":{"parameters":[{"$ref":"#/components/parameters/projectId"}],"put":{"operationId":"editMember","summary":"修改成员","description":"修改成员信息。需管理员以上权限","tags":["Members"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"permission":{"description":"仅管理员及所有者可用，仅所有者可设置管理员","allOf":[{"$ref":"#/components/schemas/Permission"}]},"note":{"description":"成员备注","type":"string"}}}}}},"responses":{"200":{"$ref":"#/components/responses/MemberItem"}}},"delete":{"operationId":"deleteMember","summary":"删除成员","description":"将成员移除出项目","tags":["Members"],"responses":{"200":{"description":"成员删除成功"}}}},"/projects/{projectId}/artifacts":{"parameters":[{"$ref":"#/components/parameters/projectId"}],"get":{"operationId":"getArtifact","tags":["Artifacts"],"summary":"导出结果","description":"获取最近一次导出的结果","responses":{"200":{"description":"返回结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Artifact"}}}}}},"post":{"operationId":"generateArtifact","tags":["Artifacts"],"summary":"触发导出","description":"手动触发导出操作，仅管理员可使用","responses":{"200":{"description":"返回结果","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Job"}}}},"403":{"description":"没有权限"}}}},"/projects/{projectId}/artifacts/download":{"parameters":[{"$ref":"#/components/parameters/projectId"}],"get":{"operationId":"downloadArtifact","tags":["Artifacts"],"summary":"下载","description":"下载导出的压缩包","responses":{"302":{"description":"重定向至压缩包链接"}}}},"/projects/{projectId}/issues":{"parameters":[{"$ref":"#/components/parameters/projectId"}],"get":{"operationId":"getIssues","tags":["Issues"],"summary":"讨论列表","description":"获取讨论列表","parameters":[{"in":"query","name":"status","description":"按状态筛选讨论（0 - 讨论中，1 - 已关闭）","schema":{"enum":[0,1]}}],"responses":{"200":{"$ref":"#/components/responses/IssueList"}}},"post":{"operationId":"createIssue","tags":["Issues"],"summary":"发起讨论","description":"创建一条新的讨论，权限可通过设置页面调整","requestBody":{"required":true,"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/Issue"}],"properties":{"status":{"readOnly":true}}}}}},"responses":{"200":{"description":"返回新创建的讨论","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Issue"}}}},"403":{"description":"没有权限创建讨论"}}}},"/projects/{projectId}/issues/{issueId}":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/issueId"}],"get":{"operationId":"getIssue","tags":["Issues"],"summary":"讨论信息","description":"通过ID获取讨论信息","responses":{"200":{"$ref":"#/components/responses/IssueItem"}}},"post":{"operationId":"operateIssue","tags":["Issues"],"summary":"操作讨论","description":"回复/订阅/取消订阅某个讨论","requestBody":{"required":true,"content":{"application/json":{"schema":{"properties":{"op":{"type":"string","description":"操作类型，回复为 `reply`，订阅为 `subscribe`，取消订阅为 `unsubscribe`","example":"reply|subscribe|unsubscribe","enum":["reply","subscribe","unsubscribe"]},"content":{"type":"string","description":"回复内容，支持markdown，仅 op 为 reply 时需要传入","example":"正在回复讨论"}},"required":["op"]}}}},"responses":{"200":{"description":"返回操作结果","content":{"application/json":{"examples":{"subscribe":{"summary":"订阅成功"},"unsubscribe":{"summary":"取消订阅成功"}}}}},"201":{"description":"返回新创建回复信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Reply"}}}}}},"put":{"operationId":"saveIssue","tags":["Issues"],"summary":"修改讨论","description":"修改讨论内容","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Issue"}}}},"responses":{"200":{"description":"返回已修改的讨论信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Issue"}}}},"403":{"description":"没有权限修改讨论"}}},"delete":{"operationId":"deleteIssue","tags":["Issues"],"summary":"删除讨论","description":"通过ID删除讨论及对话","responses":{"200":{"description":"删除成功"}}}},"/projects/{projectId}/scores":{"parameters":[{"$ref":"#/components/parameters/projectId"},{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/pageSize"},{"name":"uid","in":"query","description":"指定用户ID","schema":{"type":"number","minimum":1}},{"name":"operation","in":"query","description":"指定类型获取贡献","schema":{"type":"string","enum":["translate","edit","review"]}},{"name":"start","in":"query","description":"筛选开始时间","schema":{"type":"string","format":"date-time"}},{"name":"end","in":"query","description":"筛选结束时间","schema":{"type":"string","format":"date-time"}}],"get":{"operationId":"getScores","tags":["Scores"],"summary":"成员贡献","description":"查看项目所有的贡献","responses":{"200":{"$ref":"#/components/responses/ScoreList"}}}},"/mails":{"get":{"operationId":"getMails","parameters":[{"$ref":"#/components/parameters/page"},{"$ref":"#/components/parameters/pageSize"}],"tags":["Mails"],"summary":"私信列表","description":"获取私信列表","responses":{"200":{"$ref":"#/components/responses/MailList"}}},"post":{"operationId":"createMail","tags":["Mails"],"summary":"发送私信","description":"向其他用户发送私信","requestBody":{"required":true,"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/Mail"}]}}}},"responses":{"200":{"$ref":"#/components/responses/MailItem"}}}},"/mails/conversations/{userId}":{"parameters":[{"$ref":"#/components/parameters/userId"}],"get":{"operationId":"getConversation","tags":["Mails"],"summary":"用户对话","description":"通过用户ID获取与某用户的对话","responses":{"200":{"$ref":"#/components/responses/Conversation"}}}},"/users/{userId}":{"parameters":[{"$ref":"#/components/parameters/userId"}],"get":{"operationId":"getUser","tags":["Users"],"summary":"获取用户信息","responses":{"200":{"description":"返回用户信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}}},"put":{"operationId":"saveUser","tags":["Users"],"summary":"更新用户","description":"更改用户信息（仅支持修改自己的信息）","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"nickname":{"type":"string","maxLength":64,"example":"机智的布鲁斯"},"bio":{"type":"string","maxLength":140,"description":"个人介绍","example":"24岁，是站长"},"avatar":{"type":"string","description":"头像图片链接","example":"https://static.paratranz.cn/media/xxxxxaaaaabbbbb","format":"uri"}}}}}},"responses":{"200":{"description":"更新成功返回用户信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}}}}},"components":{"parameters":{"projectId":{"name":"projectId","in":"path","required":true,"description":"项目ID","schema":{"type":"integer"}},"fileId":{"name":"fileId","in":"path","required":true,"description":"文件ID","schema":{"type":"integer"}},"stringId":{"name":"stringId","in":"path","required":true,"description":"词条ID","schema":{"type":"integer"}},"termId":{"name":"termId","in":"path","required":true,"description":"术语ID","schema":{"type":"integer"}},"issueId":{"name":"issueId","in":"path","required":true,"description":"讨论ID","schema":{"type":"integer"}},"userId":{"name":"userId","in":"path","required":true,"description":"用户ID","schema":{"type":"integer"}},"page":{"name":"page","description":"页码","in":"query","schema":{"type":"integer","default":1},"example":1},"pageSize":{"name":"pageSize","description":"每页数量","in":"query","schema":{"type":"integer","default":50,"minimum":1,"maximum":800},"example":50}},"securitySchemes":{"Token":{"description":"使用固定 Token","type":"apiKey","in":"header","name":"Authorization"}},"responses":{"ScoreList":{"description":"返回贡献列表","content":{"application/json":{"schema":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"results":{"items":{"$ref":"#/components/schemas/Score"}}}}}}},"ProjectItem":{"description":"返回项目信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Project"}}}},"ProjectList":{"description":"返回项目列表","content":{"application/json":{"schema":{"type":"array","items":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"results":{"items":{"$ref":"#/components/schemas/Project"}}}}}}}},"FileItem":{"description":"完整文件信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/File"}}}},"FileList":{"description":"返回文件列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/File"}}}}},"StringItem":{"description":"返回词条信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/StringItem"}}}},"StringList":{"description":"返回词条列表","content":{"application/json":{"schema":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"results":{"items":{"$ref":"#/components/schemas/StringItem"}}}}}}},"TermItem":{"description":"术语信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Term"}}}},"TermList":{"description":"术语列表","content":{"application/json":{"schema":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"results":{"items":{"$ref":"#/components/schemas/Term"}}}}}}},"TermHistoryList":{"description":"术语列表","content":{"application/json":{"schema":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"results":{"items":{"$ref":"#/components/schemas/TermHistory"}}}}}}},"MemberItem":{"description":"成员信息","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Member"}}}},"MemberList":{"description":"成员列表","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Member"}}}}},"IssueItem":{"description":"返回讨论信息","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/Issue"}],"properties":{"activities":{"type":"array","description":"讨论的回复及操作记录","items":{"$ref":"#/components/schemas/Reply"}},"subscribers":{"type":"array","description":"订阅讨论的用户列表","items":{"$ref":"#/components/schemas/User"}},"user":{"description":"讨论创建者的信息","allOf":[{"$ref":"#/components/schemas/User"}]}}}}}},"IssueList":{"description":"讨论列表","content":{"application/json":{"schema":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"closedCount":{"description":"已关闭的讨论数量","type":"integer","example":2},"openCount":{"description":"讨论中的讨论数量","type":"integer","example":5},"results":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/Issue"}],"type":"object","properties":{"subscribers":{"type":"array","items":{"type":"integer","description":"用户ID"},"description":"订阅讨论的用户ID列表","example":[1,18,1440]},"childrenCount":{"type":"integer","description":"讨论对话的数量","example":3},"repliedAt":{"allOf":[{"$ref":"#/components/schemas/Datetime"}],"description":"最后回复时间"}}}}}}}}},"HistoryList":{"description":"返回词条历史列表","content":{"application/json":{"schema":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"results":{"items":{"$ref":"#/components/schemas/History"}}}}}}},"RevisionList":{"description":"返回文件历史列表","content":{"application/json":{"schema":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"results":{"items":{"$ref":"#/components/schemas/Revision"}}}}}}},"MailItem":{"description":"返回私信","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Mail"}}}},"MailList":{"description":"返回私信列表","content":{"application/json":{"schema":{"properties":{"page":{"$ref":"#/components/schemas/page"},"pageSize":{"$ref":"#/components/schemas/pageSize"},"rowCount":{"$ref":"#/components/schemas/rowCount"},"pageCount":{"$ref":"#/components/schemas/pageCount"},"results":{"items":{"$ref":"#/components/schemas/Mail"}}}}}}},"Conversation":{"description":"返回私信会话","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Mail"}}}}}},"schemas":{"page":{"description":"页码","default":1,"type":"number","example":1},"pageSize":{"description":"每页数量","default":50,"type":"number","example":50},"rowCount":{"description":"总条数","default":0,"type":"number","example":1},"pageCount":{"description":"总页数，通过总条数与每页数量计算得出","default":0,"type":"number","example":1},"Id":{"readOnly":true,"type":"integer","minimum":1,"example":1001},"ProjectId":{"readOnly":true,"type":"integer","description":"项目ID","minimum":1,"example":1453},"UserId":{"readOnly":true,"type":"integer","description":"用户ID","nullable":true,"example":18},"Datetime":{"type":"string","format":"date-time","example":"2021-01-11T03:19:52.818Z","readOnly":true},"Stage":{"default":0,"description":"词条状态\n  * `0` - 未翻译\n\n  * `1` - 已翻译\n\n  * `2` - 有疑问\n\n  * `3` - 已检查\n\n  * `5` - 已审核（二校）\n\n  * `9` - 已锁定，此状态下仅管理员可解锁，词条强制按译文导出\n\n  * `-1` - 已隐藏，此状态下词条强制按原文导出\n","type":"integer","enum":[0,1,2,3,5,9,-1]},"Permission":{"default":1,"description":"权限\n  * `1` - 翻译者\n\n  * `2` - 校对者\n\n  * `3` - 管理员\n\n  * `10` - 所有者\n","type":"integer","enum":[1,2,3,10]},"User":{"description":"用户","type":"object","properties":{"id":{"$ref":"#/components/schemas/UserId"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"updatedAt":{"$ref":"#/components/schemas/Datetime"},"lastVisit":{"description":"用户最近访问时间","allOf":[{"$ref":"#/components/schemas/Datetime"}]},"username":{"description":"用户名","type":"string","readOnly":true,"example":"bruceczk"},"nickname":{"description":"用户昵称","type":"string","example":"机智的布鲁斯"},"bio":{"description":"用户简介","type":"string","example":"是站长"},"avatar":{"description":"用户头像","type":"string","format":"uri"},"email":{"description":"用户邮箱","type":"string","format":"email"},"credit":{"description":"用户信用值，低于0将会被限制使用","default":5,"readOnly":true,"type":"integer"},"translated":{"description":"用户翻译的词条数量","type":"integer","readOnly":true},"edited":{"description":"用户编辑的词条数量","type":"integer","readOnly":true},"reviewed":{"description":"用户审核的词条数量","type":"integer","readOnly":true},"commented":{"description":"用户发布的评论数","type":"integer","readOnly":true},"points":{"description":"用户的贡献值（PP），计算公式为\n1 * 翻译词条总词数 + 0.5 * 编辑词条总词数 + 0.2 * 审核词条总词数","type":"number","readOnly":true}}},"StringItem":{"description":"词条","type":"object","properties":{"id":{"type":"integer","description":"词条ID","readOnly":true},"createdAt":{"$ref":"#/components/schemas/Datetime"},"updatedAt":{"$ref":"#/components/schemas/Datetime"},"key":{"type":"string","description":"词条键值，文件内必须唯一"},"original":{"type":"string","description":"词条原文"},"translation":{"type":"string","description":"词条译文"},"file":{"type":"object","description":"词条所属的文件详情"},"fileId":{"type":"integer","readOnly":true,"description":"词条所属文件ID"},"stage":{"$ref":"#/components/schemas/Stage"},"project":{"readOnly":true,"type":"integer","description":"词条所属项目ID"},"uid":{"readOnly":true,"type":"integer","description":"词条最后编辑用户的ID"},"context":{"type":"string","description":"词条上下文，可通过上传文件或API添加"},"words":{"type":"integer","readOnly":true,"description":"词条原文字数（暂不支持中日韩计数）"}}},"File":{"description":"文件","type":"object","properties":{"id":{"type":"integer","readOnly":true,"minimum":1,"example":421},"createdAt":{"allOf":[{"$ref":"#/components/schemas/Datetime"}],"description":"文件创建时间"},"updatedAt":{"allOf":[{"$ref":"#/components/schemas/Datetime"}],"description":"文件更新时间（上传文件时更新），默认为创建时间"},"modifiedAt":{"allOf":[{"$ref":"#/components/schemas/Datetime"}],"description":"文件修改时间（词条修改时更新），默认为创建时间；可利用此字段判断文件中词条是否有更新"},"name":{"type":"string","example":"path/to/filename.csv"},"project":{"type":"integer","readOnly":true,"minimum":1,"example":1},"format":{"type":"string","description":"文件格式，由系统自动计算","readOnly":true,"example":"ssv"},"total":{"type":"integer","description":"文件总词条数","readOnly":true,"example":1453},"translated":{"type":"integer","description":"已翻译词条数","readOnly":true,"example":1452},"disputed":{"type":"integer","description":"有疑问的词条数","readOnly":true,"example":2},"checked":{"type":"integer","description":"已检查的词条数","readOnly":true,"example":841},"reviewed":{"type":"integer","description":"已审核的词条数","readOnly":true,"example":272},"hidden":{"type":"integer","description":"已隐藏的词条数","readOnly":true,"example":2},"locked":{"type":"integer","description":"已锁定的词条数","readOnly":true,"example":1},"words":{"type":"integer","description":"总词数","readOnly":true,"example":6421},"hash":{"type":"string","description":"上一次文件更新或创建时的原文件哈希值","readOnly":true,"example":"928ca86273fd6ea36f0eebd4405eb85e"}}},"History":{"description":"词条历史记录","properties":{"id":{"type":"integer"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"field":{"description":"修改的字段","type":"string","example":"translation"},"uid":{"$ref":"#/components/schemas/UserId"},"user":{"type":"object","description":"操作者用户详情","readOnly":true},"tid":{"description":"词条ID","type":"integer","example":332315},"from":{"description":"修改前的值","type":"string","example":"这是上帝的意志！"},"to":{"description":"修改后的值","type":"string","example":"这是上帝的旨意！"},"target":{"description":"修改后词条的完整数据","type":"object","properties":{"key":{"type":"string"},"original":{"type":"string"},"translation":{"type":"string"},"stage":{"type":"integer"}},"example":"{\"key\": \"aaa.bbb\", \"stage\": 1, \"original\": \"It was the will of God!\", \"translation\": \"这是上帝的旨意！\"}"},"operation":{"description":"历史记录操作类型","type":"string","example":"edit","enum":["translate","edit","reset","dispute","review","rollback","lock","hide"]}}},"Project":{"description":"项目","type":"object","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"description":"项目创建时间","allOf":[{"$ref":"#/components/schemas/Datetime"}]},"updatedAt":{"description":"项目修改时间","nullable":true,"allOf":[{"$ref":"#/components/schemas/Datetime"}]},"uid":{"type":"integer","description":"所有者用户ID","readOnly":true},"user":{"type":"object","description":"所有者用户信息","readOnly":true},"name":{"type":"string","description":"项目名称"},"logo":{"type":"string","format":"uri","description":"项目LOGO链接"},"desc":{"type":"string","description":"项目说明"},"source":{"type":"string","description":"源语言"},"dest":{"type":"string","description":"目标语言"},"members":{"type":"integer","description":"成员数量","readOnly":true},"game":{"type":"string","example":"ck2","description":"所属游戏"},"license":{"type":"string","description":"项目使用的许可证","readOnly":true},"activeLevel":{"type":"number","description":"项目活跃度","readOnly":true},"stage":{"type":"integer","description":"项目状态","readOnly":true},"privacy":{"type":"integer","description":"项目隐私状态 * 0 - 公开 * 1 - 内部（项目公开但动态及文件私密） * 2 - 私密\n"},"download":{"type":"integer","description":"下载权限 * 0 - 公开 * 1 - 内部 * 2 - 私密\n"},"issueMode":{"type":"integer","description":"讨论权限 * 0 - 公开（所有用户都可以创建及加入讨论） * 1 - 内部（仅项目成员可以创建讨论但所有用户都可以加入） * 2 - 私密（仅项目成员可以创建及加入讨论）\n"},"reviewMode":{"type":"integer","description":"校对等级 * 0 - 无须校对 * 1 - 一次校对 * 2 - 二次校对\n"},"joinMode":{"type":"integer","description":"加入方式 * 0 - 公开（所有用户都可以直接加入项目） * 1 - 申请（加入项目需提交申请） * 2 - 测试（加入项目需完成测试） * 3 - 私密（仅管理员可添加成员）\n"}}},"Term":{"description":"术语","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"updatedAt":{"$ref":"#/components/schemas/Datetime"},"updatedBy":{"type":"integer","description":"最后修改用户的ID","readOnly":true},"pos":{"type":"string","description":"术语词性","enum":["noun","verb","adj","adv"],"example":"noun"},"uid":{"type":"integer","description":"创建用户的ID","readOnly":true},"term":{"type":"string","description":"术语原文","example":"apple"},"translation":{"type":"string","description":"术语译文","example":"苹果"},"note":{"type":"string","description":"术语注释","example":"这是一条关于苹果的术语"},"project":{"type":"integer","description":"术语所属项目ID","readOnly":true},"variants":{"type":"array","items":{"type":"string"},"description":"术语原文的其他形式（复数形式、其他时态等）","example":["apples","apple juice"]}}},"TermHistory":{"description":"术语历史记录","properties":{"id":{"type":"integer"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"field":{"description":"修改的字段","type":"string","example":"translation"},"uid":{"$ref":"#/components/schemas/UserId"},"tid":{"description":"术语ID","type":"integer","example":32315},"from":{"description":"修改前的值","type":"string","example":"苹果"},"to":{"description":"修改后的值","type":"string","example":"香蕉"},"target":{"description":"修改后术语的完整数据","type":"object","properties":{"pos":{"type":"string"},"term":{"type":"string"},"translation":{"type":"string"},"note":{"type":"string"},"variants":{"type":"array","items":{"type":"string"}}}},"operation":{"description":"历史记录操作类型","type":"string","example":"edit","enum":["translate","edit","reset","dispute","review","rollback","lock","hide"]}}},"Member":{"description":"成员","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"updatedAt":{"$ref":"#/components/schemas/Datetime"},"uid":{"readOnly":false,"allOf":[{"$ref":"#/components/schemas/UserId"}]},"user":{"readOnly":true,"allOf":[{"$ref":"#/components/schemas/User"}]},"project":{"$ref":"#/components/schemas/ProjectId"},"permission":{"$ref":"#/components/schemas/Permission"},"totalPoints":{"description":"成员PP值","type":"number","example":1145.14,"readOnly":true},"translated":{"description":"翻译条数","type":"integer","example":114,"readOnly":true},"edited":{"description":"编辑条数","type":"integer","example":145,"readOnly":true},"reviewed":{"description":"审核条数","type":"integer","example":451,"readOnly":true},"note":{"description":"成员备注","type":"string","example":"池沼"}}},"Revision":{"description":"文件上传记录","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"name":{"type":"string","description":"文件名","example":"common/countries/Ming.txt","readOnly":true},"filename":{"type":"string","example":"Ming.txt","description":"上传文件的名称","readOnly":true},"type":{"type":"string","description":"操作方式\n* create - 创建文件\n* update - 更新文件\n* import - 导入翻译\n","enum":["create","update","import"]},"file":{"type":"integer","description":"文件ID","example":2},"uid":{"$ref":"#/components/schemas/UserId"},"project":{"$ref":"#/components/schemas/ProjectId"},"insert":{"type":"integer","description":"新增的词条数量","example":5},"update":{"type":"integer","description":"更新的词条数量","example":20},"remove":{"type":"integer","description":"删除的词条数量","example":1},"hash":{"type":"string","format":"md5","description":"文件内容哈希值（MD5）","example":"c7a8e115432e30dc529025a45824baec"},"force":{"type":"boolean","description":"是否是强制更新","example":true},"incremental":{"type":"boolean","description":"是否是增量更新","example":false}}},"Comment":{"description":"评论","properties":{"id":{"type":"integer","readOnly":true},"createdAt":{"$ref":"#/components/schemas/Datetime"},"uid":{"type":"integer","readOnly":true},"project":{"type":"integer"},"type":{"type":"string","description":"评论的相关条目类型","enum":["text","announcement","term"]},"tid":{"type":"integer","description":"条目ID"},"content":{"type":"string","description":"评论内容，markdown 原始数据"},"html":{"type":"string","description":"markdown 转换后的 html 数据","readOnly":true},"images":{"type":"array","description":"图片链接列表","items":{"type":"string","format":"uri"}},"replyTo":{"type":"integer","description":"回复的评论ID"},"refer":{"type":"array","readOnly":true,"description":"评论中@的用户ID列表","items":{"type":"integer","description":"用户ID"}}}},"Artifact":{"description":"导出结果","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"project":{"$ref":"#/components/schemas/ProjectId"},"total":{"type":"integer","description":"导出时项目词条总条数"},"translated":{"type":"integer","description":"导出时项目词条已翻译的条数"},"disputed":{"type":"integer","description":"导出时项目词条有疑问的条数"},"reviewed":{"type":"integer","description":"导出时项目词条已审核的条数"},"hidden":{"type":"integer","description":"导出时项目词条已隐藏的条数"},"duration":{"type":"integer","description":"导出压缩包所用的时间 (ms)"}}},"Job":{"description":"导出任务信息","properties":{"id":{"type":"integer","minimum":1},"createdAt":{"$ref":"#/components/schemas/Datetime"},"startedAt":{"description":"任务开始时间","allOf":[{"$ref":"#/components/schemas/Datetime"}]},"finishedAt":{"description":"任务完成时间","allOf":[{"$ref":"#/components/schemas/Datetime"}]},"scheduledAt":{"description":"任务定时启动时间","allOf":[{"$ref":"#/components/schemas/Datetime"}]},"params":{"type":"object","description":"任务执行参数"},"project":{"$ref":"#/components/schemas/ProjectId"},"uid":{"type":"integer","description":"创建者用户ID"},"type":{"type":"string","description":"任务类型"},"status":{"type":"integer","description":"任务状态，0 - 未开始，1 - 正在执行，2 - 执行成功，-1 - 执行失败"},"result":{"type":"object","description":"任务结果"}}},"Issue":{"description":"讨论","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"updatedAt":{"description":"更新时间","allOf":[{"$ref":"#/components/schemas/Datetime"}]},"project":{"$ref":"#/components/schemas/ProjectId"},"uid":{"$ref":"#/components/schemas/UserId"},"parent":{"type":"integer","readOnly":true,"description":"当前对话条目所属讨论ID，用是否有parent字段判断类型"},"title":{"type":"string","description":"标题，仅主讨论中存在","example":"讨论标题"},"content":{"type":"string","description":"原始内容（markdown）","example":"讨论内容 [链接](https://paratranz.cn)"},"html":{"type":"string","readOnly":true,"description":"content 的 markdown 转换之后的 html","example":"讨论内容 <a href=\"https://paratranz.cn\">链接</a>"},"status":{"type":"integer","description":"主讨论的状态，0 - 讨论中，1 - 已关闭"},"lastEdit":{"allOf":[{"$ref":"#/components/schemas/UserId"}],"description":"最后编辑者的 uid"},"refer":{"items":{"$ref":"#/components/schemas/UserId"},"type":"array","readOnly":true,"example":"[1, 2, 3]","description":"在内容中提到（@）的用户的uid列表，如 `[1, 2, 3]`"}}},"Reply":{"description":"讨论","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"updatedAt":{"description":"更新时间","allOf":[{"$ref":"#/components/schemas/Datetime"}]},"project":{"$ref":"#/components/schemas/ProjectId"},"uid":{"$ref":"#/components/schemas/UserId"},"parent":{"type":"integer","readOnly":true,"description":"当前对话条目所属讨论ID，用是否有parent字段判断类型","example":58},"content":{"type":"string","description":"原始内容（markdown）","example":"回复内容 [链接](https://paratranz.cn)"},"html":{"type":"string","readOnly":true,"description":"content 的 markdown 转换之后的 html","example":"回复内容 <a href=\"https://paratranz.cn\">链接</a>"},"lastEdit":{"allOf":[{"$ref":"#/components/schemas/UserId"}],"description":"最后编辑者的 uid"},"refer":{"items":{"$ref":"#/components/schemas/UserId"},"type":"array","readOnly":true,"example":"[1, 2, 3]","description":"在内容中提到（@）的用户的uid列表，如 `[1, 2, 3]`"}}},"Mail":{"description":"私信","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"from":{"description":"发送者的UID","readOnly":true,"allOf":[{"$ref":"#/components/schemas/UserId"}]},"fromUser":{"description":"发送者的用户信息","readOnly":true,"allOf":[{"$ref":"#/components/schemas/User"}]},"to":{"description":"接收者的UID","allOf":[{"$ref":"#/components/schemas/UserId"}]},"toUser":{"description":"发送者的用户信息","readOnly":true,"allOf":[{"$ref":"#/components/schemas/User"}]},"content":{"type":"string","description":"原始内容（markdown）","example":"私信内容 [链接](https://paratranz.cn)"},"html":{"type":"string","readOnly":true,"description":"content 的 markdown 转换之后的 html","example":"私信内容 <a href=\"https://paratranz.cn\">链接</a>"},"status":{"type":"integer","description":"私信的状态，0 - 未读，1 - 已读"}}},"Score":{"description":"贡献","properties":{"id":{"$ref":"#/components/schemas/Id"},"createdAt":{"$ref":"#/components/schemas/Datetime"},"project":{"$ref":"#/components/schemas/ProjectId"},"uid":{"$ref":"#/components/schemas/UserId"},"base":{"type":"integer","format":"double","readOnly":true,"example":0.5,"description":"贡献值基准，翻译为1，编辑为0.5，审核为0.2"},"multiplier":{"type":"integer","format":"double","example":12.8,"description":"贡献值乘数，公式为 1 + (词数 - 1) * 0.1"},"value":{"type":"integer","format":"double","example":6.4,"description":"基准乘以乘数得到的最终值"}}}}}}